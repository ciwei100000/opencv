--- a/src/highgui/cvcap_libv4l.cpp	2011-07-11 01:45:09.000000000 +0900
+++ b/src/highgui/cvcap_libv4l.cpp	2011-07-11 01:47:00.000000000 +0900
@@ -202,7 +202,7 @@
 
 #include "_highgui.h"
 
-#if !defined WIN32 && defined HAVE_CAMV4L && defined HAVE_CAMV4L2
+#if !defined WIN32 && defined HAVE_LIBV4L
 
 #define CLEAR(x) memset (&(x), 0, sizeof (x))
 
@@ -219,8 +219,12 @@
 #include <sys/stat.h>
 #include <sys/ioctl.h>
 
+#ifdef HAVE_CAMV4L
 #include <linux/videodev.h>
+#endif
+#ifdef HAVE_CAMV4L2
 #include <linux/videodev2.h>
+#endif
 
 #include <libv4l1.h>
 #include <libv4l2.h>
--- a/cvconfig.h.cmake	2011-07-11 01:47:12.000000000 +0900
+++ b/cvconfig.h.cmake	2011-07-11 01:47:59.000000000 +0900
@@ -19,6 +19,9 @@
 /* V4L2 capturing support */
 #cmakedefine HAVE_CAMV4L2
 
+/* V4L/V4L2 capturing support via libv4l */
+#cmakedefine HAVE_LIBV4L
+
 /* Carbon windowing environment */
 #cmakedefine HAVE_CARBON
 
